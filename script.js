function excluirIndice(arr,indice){
    let arrAux = [];
    for (let i=0;i<arr.length;i++){
    if(i!=indice){arrAux.push(arr[i]);};
    }
    return arrAux;
    }
    
    function virar(valor){
    
        if (acesso){
    
            valor = Number(valor);
            if (!indicesVirados.includes(indicesAleatorios[valor])){
            document.getElementsByTagName("h2")[valor].innerHTML = cartas[indicesAleatorios[valor]];
    
            if (statusCarta == false){ //se for a primeira carta virada, entÃ£o permite clicar em mais uma
                statusCarta = true;
                ultimoValor = valor;
            }
            
            else{ // segunda carta virada
                acesso = false;
                    if(indicesAleatorios[valor] != indicesAleatorios[ultimoValor]){ //se forem cartas diferente
                        setTimeout(function(){
                            document.getElementsByTagName("h2")[valor].innerHTML = "";
                            document.getElementsByTagName("h2")[ultimoValor].innerHTML = "";
                            console.log(indicesAleatorios[valor]+" diferente "+indicesAleatorios[ultimoValor]);
                            acesso = true;
                            statusCarta = false;
                        },1000);
                    }
                    else if(valor == ultimoValor){ // se for a mesma carta
                        console.log("Clicou na mesma carta");
                        acesso = true;
                    }
                    else{ // se acertar cartas iguais
                        setTimeout(function(){
                        acesso = true;
                        statusCarta = false;
                        console.log(indicesAleatorios[valor]+" igual "+indicesAleatorios[ultimoValor]);
                        indicesVirados.push(indicesAleatorios[valor]);
                        console.log(indicesVirados);
                        document.getElementsByClassName("item")[valor].setAttribute("style","background-color: black");
                        document.getElementsByClassName("item")[ultimoValor].setAttribute("style","background-color: black");
                        },1000);
                    }
    
            }
        }
        }
    
    }

function start(){
    let check = document.getElementsByName("emoji");
    for (let i=0;i<check.length;i++){
        if(check[i].checked){cartas = cartas.concat(options[i]);}
    }
    if (cartas.length > 0){
        document.getElementsByClassName("settings")[0].setAttribute("style","display: none");
        document.getElementsByClassName("container")[0].setAttribute("style","display: flex"); //flex
    

    for (let i=0;i<cartas.length;i++){indicesCartas.push(i);}
    for (let i=0;i<(cartas.length-25);i++){
    let numberAleatorio = Math.trunc(Math.random()*indicesCartas.length);
    indicesCartas = excluirIndice(indicesCartas,numberAleatorio);
    }
    for (let i=0;i<25;i++){indices.push(indicesCartas[i]);indices.push(indicesCartas[i]);}
    for (let i=0;i<50;i++){
    let numberAleatorio = Math.trunc(Math.random()*indices.length);
    indicesAleatorios.push(indices[numberAleatorio]);
    indices = excluirIndice(indices,numberAleatorio);
    }

    }
else {cartas=[];}

}

const caras = ['&#128512','&#128513','&#128514','&#128515','&#128516','&#128517','&#128518','&#128519','&#128520','&#128521','&#128522','&#128523','&#128524','&#128525','&#128526','&#128527','&#128528','&#128529','&#128530','&#128531','&#128532','&#128533','&#128534','&#128535','&#128536','&#128537','&#128538','&#128539','&#128540','&#128541','&#128542','&#128543','&#128544','&#128545','&#128546','&#128547','&#128548','&#128549','&#128550','&#128551','&#128552','&#128553','&#128554','&#128555','&#128556','&#128557','&#128558','&#128559','&#128560','&#128561','&#128562','&#128563','&#128564','&#128565','&#128566','&#128567','&#128577','&#128578','&#128579','&#128580','&#129296','&#129297','&#129298','&#129299','&#129300','&#129301','&#129303','&#129312','&#129314','&#129315','&#129316','&#129317','&#129319','&#129320','&#129321','&#129322','&#129323','&#129325','&#129326','&#129327','&#129392','&#129393','&#129395','&#129396','&#129397','&#129398','&#129402','&#129488','&#128568','&#128569','&#128570','&#128571','&#128572','&#128573','&#128574','&#128575','&#128576','&#128584','&#128585','&#128586','&#128127','&#128128','&#129324','&#128169','&#129302','&#129313','&#128121','&#128122','&#128123','&#128125','&#128126'];
const animais = ['&#128000','&#128001','&#128002','&#128003','&#128004','&#128005','&#128006','&#128007','&#128008','&#128009','&#128010','&#128011','&#128012','&#128013','&#128014','&#128015','&#128016','&#128017','&#128018','&#128019','&#128020','&#128021','&#128022','&#128023','&#128024','&#128025','&#128026','&#128027','&#128028','&#128029','&#128030','&#128031','&#128032','&#128033','&#128034','&#128035','&#128036','&#128037','&#128038','&#128039','&#128040','&#128041','&#128042','&#128043','&#128044','&#128045','&#128046','&#128047','&#128048','&#128049','&#128050','&#128051','&#128052','&#128053','&#128054','&#128055','&#128056','&#128057','&#128058','&#128059','&#128060','&#128061','&#128062','&#129408','&#129409','&#129410','&#129411','&#129412','&#129413','&#129414','&#129415','&#129416','&#129417','&#129418','&#129419','&#129420','&#129421','&#129422','&#129423','&#129424','&#129425','&#129426','&#129427','&#129428','&#129429','&#129430','&#129431','&#129432','&#129433','&#129434','&#129435','&#129436','&#129437','&#129438','&#129439','&#129440','&#129441','&#129442','&#129443','&#129444','&#129445','&#129446','&#129447','&#129448','&#129449','&#129450','&#129451','&#129452','&#129453','&#129454'];
const transportes = ['&#128640','&#128641','&#128642','&#128643','&#128644','&#128645','&#128646','&#128647','&#128648','&#128649','&#128650','&#128651','&#128652','&#128653','&#128654','&#128655','&#128656','&#128657','&#128658','&#128659','&#128660','&#128661','&#128662','&#128663','&#128664','&#128665','&#128666','&#128667','&#128668','&#128669','&#128670','&#128671','&#128672','&#128673','&#128674','&#128675','&#128676','&#128678','&#128690','&#128692','&#128693','&#128694','&#128722','&#128733','&#128747','&#128748','&#128756','&#128757','&#128758','&#128759','&#128760','&#128761','&#128762','&#128763','&#128764'];
const comidas = ['&#9749','&#127861','&#127862','&#127863','&#127864','&#127865','&#127866','&#127867','&#127868','&#127870','&#127994','&#129346','&#129347','&#129371','&#129380','&#129475','&#129481','&#129482','&#127789','&#127790','&#127791','&#127828','&#127829','&#127830','&#127831','&#127832','&#127833','&#127834','&#127835','&#127836','&#127837','&#127838','&#127839','&#127840','&#127841','&#127842','&#127843','&#127844','&#127845','&#127846','&#127847','&#127848','&#127849','&#127850','&#127851','&#127852','&#127853','&#127854','&#127855','&#127856','&#127857','&#127858','&#127859','&#127871','&#129360','&#129363','&#129366','&#129367','&#129368','&#129369','&#129370','&#129372','&#129374','&#129375','&#129376','&#129377','&#129379','&#129381','&#129383','&#129384','&#129385','&#129386','&#129387','&#129390','&#129391','&#129472','&#129473','&#129478','&#129479','&#129480','&#127805','&#127806','&#127813','&#127814','&#129361','&#129362','&#129364','&#129365','&#129382','&#129388','&#129476','&#129477','&#127860','&#128298','&#129348','&#129378','&#129474','&#127815','&#127816','&#127817','&#127818','&#127819','&#127820','&#127821','&#127822','&#127823','&#127824','&#127825','&#127826','&#127827','&#129373','&#129389'];
const pessoas = ['&#128110','&#128111','&#128112','&#128114','&#128115','&#128119','&#128120','&#128372','&#128373','&#128129','&#128130','&#128131','&#129332','&#129333','&#128106','&#128107','&#128108','&#128109','&#128143','&#128145','&#129328','&#129329','&#128100','&#128101','&#128102','&#128103','&#128104','&#128105','&#128113','&#128116','&#128117','&#128118','&#128378','&#129485','&#129486','&#129489','&#129490','&#129491','&#129492','&#129493','&#129494','&#129495','&#129496','&#128134','&#128135','&#128581','&#128582','&#128583','&#128587','&#128589','&#128590','&#129318','&#129329','&#129335','&#129487','&#127877','&#128124','&#129334','&#129464','&#129465','&#129497','&#129498','&#129499','&#129500','&#129501','&#129502','&#129503'];
const natureza = ['&#127792','&#127793','&#127794','&#127795','&#127796','&#127797','&#127799','&#127800','&#127801','&#127802','&#127803','&#127804','&#127807','&#127808','&#127809','&#127810','&#127811','&#127812','&#128144','&#129344','&#128174','&#127756','&#127757','&#127758','&#127759','&#127760','&#127761','&#127762','&#127763','&#127764','&#127765','&#127766','&#127767','&#127768','&#127769','&#127770','&#127771','&#127772','&#127773','&#127774','&#127775','&#127776','&#9925','&#9924','&#9748','&#127744','&#127745','&#127746','&#127747','&#127748','&#127749','&#127750','&#127751','&#127752','&#127753','&#127754'];


    const options = [caras,animais,transportes,comidas,pessoas,natureza];
    let cartas = [];
    let indicesCartas = []
    let indices = [];
    let indicesAleatorios = [];
    let indicesVirados = [];
    let statusCarta = false; //se tem carta virada
    let ultimoValor = 0; //ultimo indice virado
    let acesso = true; //pode virar uma carta

const checkboxes = document.getElementsByName("emoji");
const chooseOptions = document.getElementsByClassName("chooseOption");

checkboxes.forEach((checkbox,index) => {
    checkbox.addEventListener('change', function() {
        if (checkbox.checked) {
            chooseOptions[index].classList.add('checked');
        } else {
            chooseOptions[index].classList.remove('checked');
        }
    });
});

const items = Array.from(document.getElementsByClassName("item"));

items.forEach(function (itemAux, index) {
    itemAux.addEventListener('click', function () {
        console.log("clicou no " + index);
        virar(index);
    });
});